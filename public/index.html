<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ZyG - Discord VC Attendance - FIXING!</title>
<style>
/* ------------------ GENERAL ------------------ */
body { 
  font-family: 'Segoe UI', sans-serif; 
  background:#0d1117; 
  color:#e6edf3; 
  margin:0; 
  padding:0; 
  display:flex; 
  flex-direction:column; 
  align-items:center; 
}
h1 { 
  color:#238636; 
  margin:20px 0; 
  text-align:center;
  word-break: break-word;
  flex:1;
}

/* ------------------ HEADER ------------------ */
header {
  width: 100%;
  display:flex;
  justify-content:center;
  align-items:center;
  padding: 10px 20px;
  box-sizing: border-box;
  position: relative;
}
.admin-controls {
  display:flex;
  align-items:center;
  gap:10px;
  position: absolute;
  right: 20px;
  top: 50%;
  transform: translateY(-50%);
  flex-wrap: nowrap;
}
.admin-controls input, .admin-controls button {
  padding:6px 10px;
  border-radius:6px;
  border:none;
  font-size:0.9em;
}
.admin-controls input { border:1px solid #30363d; background:#0d1117; color:#e6edf3; }

/* ------------------ CONTAINER ------------------ */
.container { 
  display:flex; 
  flex-wrap:nowrap; 
  gap:20px; 
  justify-content:center; 
  width:95%; 
  box-sizing:border-box;
  align-items:flex-start;
}

/* ------------------ PANELS ------------------ */
.panel { 
  background:#161b22; 
  border:1px solid #30363d; 
  border-radius:12px; 
  padding:20px; 
  box-sizing:border-box;
}
#mainPanel { 
  flex:2; 
  max-width:700px; 
}
#vcPanel { 
  flex:1; 
  max-width:400px; 
}
#imagePanel { 
  margin-top:10px;
}
table { width:100%; border-collapse:collapse; margin-top:10px;}
th,td { border-bottom:1px solid #30363d; padding:6px 10px; text-align:left; }
th { color:#238636; }
.joined { color:#2ea043; }
.left { color:#da3633; }
#history { max-height:150px; overflow-y:auto; font-size:0.9em; }
#vcAlert { margin-bottom:10px; font-weight:bold; display:none; font-size:1em; }
textarea { width:100%; height:60px; background:#0d1117; color:#e6edf3; border:1px solid #30363d; border-radius:6px; margin-top:10px; padding:6px; resize:none; }
button { background:#238636; color:#fff; border:none; border-radius:6px; padding:6px 12px; margin-top:6px; cursor:pointer; }
button:hover { background:#2ea043; }
.status-icons { font-size:16px; }
input[type="file"] { margin-top:10px; }

/* ------------------ VISITOR TABLE BUTTONS ------------------ */
.table-buttons {
  display:flex;
  gap:10px;
  margin-top:10px;
}
.table-buttons button { margin-top:0; }

/* ------------------ RESPONSIVE ------------------ */
@media(max-width:900px){
  .container{flex-direction:column; align-items:center;}
  header{justify-content:center; padding:10px;}
  .admin-controls{position: absolute; top:10px; right:10px; transform:none; flex-wrap:wrap;}
  #mainPanel, #vcPanel{max-width:95%;}
}
</style>
</head>
<body>

<header>
  <h1>ZyG - Discord VC Attendance Live</h1>
  <div class="admin-controls">
    <span id="adminStatus" style="display:none; font-weight:bold; color:#2ea043;">Admin Logged In</span>
    <button id="adminBtn">Admin Login</button>
    <input type="password" id="adminPassword" placeholder="Password" style="display:none;">
    <button id="logoutBtn" style="display:none;">Logout</button>
  </div>
</header>

<div class="container">

  <!-- MAIN PANEL -->
  <div class="panel" id="mainPanel">
    <h2>üì¢ Announcements</h2>
    <div id="announcement"></div>

    <!-- Visitor Table Buttons -->
    <div class="table-buttons">
      <button id="nextMarketBtn">Next Market Table</button>
      <button id="screenshotBtn">Screenshot Table</button>
    </div>

    <!-- Market Table -->
    <div id="marketTableContainer" style="display:none;">
      <h3>Next Market</h3>
      <table id="marketTable">
        <thead><tr><th>Date</th><th>Item</th><th>Price</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>

    <!-- Screenshot Table -->
    <div id="screenshotTableContainer" style="display:none;">
      <h3>Screenshot Uploads</h3>
      <table id="screenshotTable">
        <thead><tr><th>Preview</th><th>Filename</th><th>Status</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>

  </div>

  <!-- RIGHT PANEL: Active VC & Image Upload -->
  <div style="display:flex; flex-direction:column; gap:10px; flex:1;">
    <div class="panel" id="vcPanel">
      <h2>üü¢ Live Voice Chat - Lordnine</h2>
      <div id="vcAlert"></div>
      <table id="active">
        <thead><tr><th>User</th><th>Channel</th><th>Status</th><th>Duration</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>

    <!-- Admin-only Image Panel -->
    <div class="panel" id="imagePanel" style="display:none;">
      <h2>üñºÔ∏è Upload image/screenshot for Attendance</h2>
      <input type="file" id="imageInput" multiple accept="image/*">
      <button onclick="uploadImages()">Upload to Table</button>
      <table id="imageTable">
        <thead><tr><th>Preview</th><th>Filename</th><th>Status</th></tr></thead>
        <tbody></tbody>
      </table>
      <textarea id="imageMessage" placeholder="Optional message to send with the images..."></textarea>
      <button onclick="sendImagesToDiscord()">Send All to Discord</button>
      <button onclick="clearImageTable()"> Clear Table</button>
      <button onclick="toggleHistoryPanel()"> Show Join/Leave History</button>
      <div id="notification">‚úÖ Images successfully uploaded! Clearing table...</div>
      <div id="history" style="display:none;"></div>
    </div>
  </div>

</div>

<script>
// ------------------ ADMIN LOGIN ------------------
const adminBtn = document.getElementById('adminBtn');
const logoutBtn = document.getElementById('logoutBtn');
const adminPassword = document.getElementById('adminPassword');
const adminStatus = document.getElementById('adminStatus');
const imagePanel = document.getElementById('imagePanel');

adminBtn.addEventListener('click', () => {
  adminPassword.style.display = 'inline-block';
  const password = prompt("Enter admin password:");
  if(password === "admin123"){ // example password
    adminStatus.style.display = 'inline';
    adminBtn.style.display = 'none';
    adminPassword.style.display = 'none';
    logoutBtn.style.display = 'inline-block';
    imagePanel.style.display = 'block';
  } else {
    alert("Wrong password!");
  }
});

logoutBtn.addEventListener('click', () => {
  adminStatus.style.display = 'none';
  adminBtn.style.display = 'inline-block';
  logoutBtn.style.display = 'none';
  imagePanel.style.display = 'none';
});

// ------------------ MARKET & SCREENSHOT TABLES ------------------
const nextMarketBtn = document.getElementById('nextMarketBtn');
const screenshotBtn = document.getElementById('screenshotBtn');
const marketTableContainer = document.getElementById('marketTableContainer');
const screenshotTableContainer = document.getElementById('screenshotTableContainer');

nextMarketBtn.addEventListener('click', () => {
  marketTableContainer.style.display = 'block';
  screenshotTableContainer.style.display = 'none';
});

screenshotBtn.addEventListener('click', () => {
  screenshotTableContainer.style.display = 'block';
  marketTableContainer.style.display = 'none';
});

// ------------------ EXAMPLE ANNOUNCEMENT ------------------
document.getElementById('announcement').innerHTML = `
  <p>Welcome to ZyG Discord VC Attendance!</p>
  <p>Check Next Market or Uploaded Screenshots below.</p>
`;

// ------------------ FILL EXAMPLE TABLE DATA ------------------
const marketTable = document.getElementById('marketTable').querySelector('tbody');
marketTable.innerHTML = `
<tr><td>2025-11-15</td><td>Item A</td><td>$100</td></tr>
<tr><td>2025-11-16</td><td>Item B</td><td>$150</td></tr>
<tr><td>2025-11-17</td><td>Item C</td><td>$200</td></tr>
`;
</script>

</body>
</html>
